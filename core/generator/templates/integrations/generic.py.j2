"""
{{ spec.name }} â€“ {{ integration.name }} integration
Generated by workflow-gen for {{ spec.name }} v{{ spec.version }}
"""

from plugins.registry import plugin_registry

def register(workflow):
    """
    Register all states for the '{{ integration.name }}' integration.
    """
    plugin_name = "{{ integration.name }}"
    plugin = plugin_registry.get_plugin(plugin_name)

    {%- if integration.config %}
    # Integration configuration
    config = {{ integration.config | quote }}
    {%- else %}
    # No specific configuration provided
    config = {}
    {%- endif %}

    {%- if plugin_info.states %}
    # Register plugin states
    {%- for state in plugin_info.states %}
    workflow.add_state(
        name="{{ integration.name }}.{{ state }}",
        func=plugin_registry.get_state_function(
            plugin_name,
            "{{ state }}",
            config
        )
    )
    {%- endfor %}
    {%- else %}
    # Plugin '{{ integration.name }}' has no states to register.
    {%- endif %}
